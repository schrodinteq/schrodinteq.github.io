<!DOCTYPE html>
<html lang="english">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Error due to insufficient memory in Amazon Braket | Schrodin&#39;s Diary on Quantum Computing and Quantum Programming</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Amazon Braket Learning Course I have created a learning course on Amazon Braket, AWS&rsquo;s quantum computing service.
Quantum Computing on AWS for Beginners: Amazon Braket This course is designed for those with no prior knowledge of quantum computing or AWS, and by the end, you&rsquo;ll even be able to learn about quantum machine learning. Take advantage of this opportunity to build your skills in quantum technologies!
Error Due to Insufficient Memory in Amazon Braket Local Simulator When running the local simulator in Amazon Braket, AWS&rsquo;s quantum computing service, the following error may be output.">
    <meta name="generator" content="Hugo 0.128.1">
    
    
    
    
      <meta name="robots" content="index, follow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.13b1b261ee5e4804730aaa2e64ba98f5872177502bbdaf7119319dd9331c082e.css" >



    
    <script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
  },
  svg: {
    fontCache: 'global'
  }
};
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>


<link rel="stylesheet" href="/css/_styles.css">

    
      

    

    

    
      <link rel="canonical" href="https://schrodinteq.github.io/braketmemerr/">
    

    <meta property="og:url" content="https://schrodinteq.github.io/braketmemerr/">
  <meta property="og:site_name" content="Schrodin&#39;s Diary on Quantum Computing and Quantum Programming">
  <meta property="og:title" content="Error due to insufficient memory in Amazon Braket">
  <meta property="og:description" content="Amazon Braket Learning Course I have created a learning course on Amazon Braket, AWS’s quantum computing service.
Quantum Computing on AWS for Beginners: Amazon Braket This course is designed for those with no prior knowledge of quantum computing or AWS, and by the end, you’ll even be able to learn about quantum machine learning. Take advantage of this opportunity to build your skills in quantum technologies!
Error Due to Insufficient Memory in Amazon Braket Local Simulator When running the local simulator in Amazon Braket, AWS’s quantum computing service, the following error may be output.">
  <meta property="og:locale" content="english">
  <meta property="og:type" content="article">
    <meta property="article:published_time" content="2025-05-16T10:07:44+09:00">
    <meta property="article:modified_time" content="2025-05-16T10:07:44+09:00">

  <meta itemprop="name" content="Error due to insufficient memory in Amazon Braket">
  <meta itemprop="description" content="Amazon Braket Learning Course I have created a learning course on Amazon Braket, AWS’s quantum computing service.
Quantum Computing on AWS for Beginners: Amazon Braket This course is designed for those with no prior knowledge of quantum computing or AWS, and by the end, you’ll even be able to learn about quantum machine learning. Take advantage of this opportunity to build your skills in quantum technologies!
Error Due to Insufficient Memory in Amazon Braket Local Simulator When running the local simulator in Amazon Braket, AWS’s quantum computing service, the following error may be output.">
  <meta itemprop="datePublished" content="2025-05-16T10:07:44+09:00">
  <meta itemprop="dateModified" content="2025-05-16T10:07:44+09:00">
  <meta itemprop="wordCount" content="581">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Error due to insufficient memory in Amazon Braket">
  <meta name="twitter:description" content="Amazon Braket Learning Course I have created a learning course on Amazon Braket, AWS’s quantum computing service.
Quantum Computing on AWS for Beginners: Amazon Braket This course is designed for those with no prior knowledge of quantum computing or AWS, and by the end, you’ll even be able to learn about quantum machine learning. Take advantage of this opportunity to build your skills in quantum technologies!
Error Due to Insufficient Memory in Amazon Braket Local Simulator When running the local simulator in Amazon Braket, AWS’s quantum computing service, the following error may be output.">

      
  


    
        


  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Your Page Title</title>
  
  <link rel="icon" type="image/x-icon" href="/ff01.png">
  </head>

  <body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Schrodin&#39;s Diary on Quantum Computing and Quantum Programming
      
    </a>
    <div class="flex-l items-center">
      
<h4></h4>
<ul class="pl0 mr3">
    
    <li class="list f5 f4-ns fw4 dib pr3">
        <a class="hover-white no-underline white-90" href="/japanese/braketmemerr/">japanese</a>
    </li>
    
</ul>


      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

    </div>
  </header>


    <main class="pb7" role="main">
      
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <header>
        <h1 class="f1">
          Error due to insufficient memory in Amazon Braket
        </h1>
      </header>
      <div class="nested-copy-line-height lh-copy f4 nested-links mid-gray">
        <hr>
<h4 id="amazon-braket-learning-course">Amazon Braket Learning Course</h4>
<p>I have created a learning course on Amazon Braket, AWS&rsquo;s quantum computing service.</p>
<div style="display: flex; align-items: center;">
  <a href="https://www.udemy.com/course/quantum-computing-on-aws-for-beginners-amazon-braket/?referralCode=F361C3FD774489A1B5B8" target="_blank" style="margin-right: 20px;">
    <img src="/mycourses/AWSCourse.webp" alt="QiskitCourseJa" width="170" style="vertical-align: middle;">
  </a>
  <div style="word-break: break-all; font-size: 90%;">
    <a href="https://www.udemy.com/course/quantum-computing-on-aws-for-beginners-amazon-braket/?referralCode=F361C3FD774489A1B5B8" target="_blank">
      Quantum Computing on AWS for Beginners: Amazon Braket
    </a>
  </div>
</div>
<p>This course is designed for those with no prior knowledge of quantum computing or AWS, and by the end, you&rsquo;ll even be able to learn about quantum machine learning.
Take advantage of this opportunity to build your skills in quantum technologies!</p>
<hr>
<h1 id="error-due-to-insufficient-memory-in-amazon-braket-local-simulator">Error Due to Insufficient Memory in Amazon Braket Local Simulator</h1>
<p>When running the local simulator in Amazon Braket, AWS&rsquo;s quantum computing service, the following error may be output.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">---------------------------------------------------------------------------</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">MemoryError</span>                               Traceback (most recent call last)
</span></span><span style="display:flex;"><span>Cell In[<span style="color:#ae81ff">11</span>], line <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">1</span> device <span style="color:#f92672">=</span> LocalSimulator()
</span></span><span style="display:flex;"><span><span style="color:#f92672">----&gt;</span> <span style="color:#ae81ff">2</span> result <span style="color:#f92672">=</span> device<span style="color:#f92672">.</span>run(myqc, shots<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>)<span style="color:#f92672">.</span>result()
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">3</span> counts <span style="color:#f92672">=</span> result<span style="color:#f92672">.</span>measurement_counts
</span></span><span style="display:flex;"><span>      <span style="color:#ae81ff">4</span> plt<span style="color:#f92672">.</span>bar(counts<span style="color:#f92672">.</span>keys(), counts<span style="color:#f92672">.</span>values())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>File <span style="color:#f92672">~/</span>anaconda3<span style="color:#f92672">/</span>envs<span style="color:#f92672">/</span>Braket<span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>python3<span style="color:#ae81ff">.10</span><span style="color:#f92672">/</span>site<span style="color:#f92672">-</span>packages<span style="color:#f92672">/</span>braket<span style="color:#f92672">/</span>devices<span style="color:#f92672">/</span>local_simulator<span style="color:#f92672">.</span>py:<span style="color:#ae81ff">126</span>, <span style="color:#f92672">in</span> LocalSimulator<span style="color:#f92672">.</span>run(self, task_specification, shots, inputs, <span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">124</span>     task_specification <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>_apply_noise_model_to_circuit(task_specification)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">125</span> payload <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>_construct_payload(task_specification, inputs, shots)
</span></span><span style="display:flex;"><span><span style="color:#f92672">--&gt;</span> <span style="color:#ae81ff">126</span> result <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>_delegate<span style="color:#f92672">.</span>run(payload, <span style="color:#f92672">*</span>args, shots<span style="color:#f92672">=</span>shots, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">127</span> <span style="color:#66d9ef">return</span> LocalQuantumTask(self<span style="color:#f92672">.</span>_to_result_object(result))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>File <span style="color:#f92672">~/</span>anaconda3<span style="color:#f92672">/</span>envs<span style="color:#f92672">/</span>Braket<span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>python3<span style="color:#ae81ff">.10</span><span style="color:#f92672">/</span>site<span style="color:#f92672">-</span>packages<span style="color:#f92672">/</span>braket<span style="color:#f92672">/</span>default_simulator<span style="color:#f92672">/</span>simulator<span style="color:#f92672">.</span>py:<span style="color:#ae81ff">149</span>, <span style="color:#f92672">in</span> BaseLocalSimulator<span style="color:#f92672">.</span>run(self, circuit_ir, <span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">127</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    128 Simulate a circuit using either OpenQASM or Jaqcd.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    129 
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">   (...)
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    146         are requested when shots&gt;0.
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    147 &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">148</span> <span style="color:#66d9ef">if</span> isinstance(circuit_ir, OpenQASMProgram):
</span></span><span style="display:flex;"><span><span style="color:#f92672">--&gt;</span> <span style="color:#ae81ff">149</span>     <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>run_openqasm(circuit_ir, <span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">150</span> <span style="color:#66d9ef">return</span> self<span style="color:#f92672">.</span>run_jaqcd(circuit_ir, <span style="color:#f92672">*</span>args, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>File <span style="color:#f92672">~/</span>anaconda3<span style="color:#f92672">/</span>envs<span style="color:#f92672">/</span>Braket<span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>python3<span style="color:#ae81ff">.10</span><span style="color:#f92672">/</span>site<span style="color:#f92672">-</span>packages<span style="color:#f92672">/</span>braket<span style="color:#f92672">/</span>default_simulator<span style="color:#f92672">/</span>simulator<span style="color:#f92672">.</span>py:<span style="color:#ae81ff">603</span>, <span style="color:#f92672">in</span> BaseLocalSimulator<span style="color:#f92672">.</span>run_openqasm(self, openqasm_ir, shots, batch_size)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">599</span> BaseLocalSimulator<span style="color:#f92672">.</span>_validate_shots_and_ir_results(shots, circuit<span style="color:#f92672">.</span>results, qubit_count)
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">601</span> results <span style="color:#f92672">=</span> circuit<span style="color:#f92672">.</span>results
</span></span><span style="display:flex;"><span><span style="color:#f92672">--&gt;</span> <span style="color:#ae81ff">603</span> simulation <span style="color:#f92672">=</span> self<span style="color:#f92672">.</span>initialize_simulation(
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">604</span>     qubit_count<span style="color:#f92672">=</span>qubit_count, shots<span style="color:#f92672">=</span>shots, batch_size<span style="color:#f92672">=</span>batch_size
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">605</span> )
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">606</span> operations <span style="color:#f92672">=</span> circuit<span style="color:#f92672">.</span>instructions
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">607</span> simulation<span style="color:#f92672">.</span>evolve(operations)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>File <span style="color:#f92672">~/</span>anaconda3<span style="color:#f92672">/</span>envs<span style="color:#f92672">/</span>Braket<span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>python3<span style="color:#ae81ff">.10</span><span style="color:#f92672">/</span>site<span style="color:#f92672">-</span>packages<span style="color:#f92672">/</span>braket<span style="color:#f92672">/</span>default_simulator<span style="color:#f92672">/</span>state_vector_simulator<span style="color:#f92672">.</span>py:<span style="color:#ae81ff">41</span>, <span style="color:#f92672">in</span> StateVectorSimulator<span style="color:#f92672">.</span>initialize_simulation(self, <span style="color:#f92672">**</span>kwargs)
</span></span><span style="display:flex;"><span>     <span style="color:#ae81ff">39</span> shots <span style="color:#f92672">=</span> kwargs<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;shots&#34;</span>)
</span></span><span style="display:flex;"><span>     <span style="color:#ae81ff">40</span> batch_size <span style="color:#f92672">=</span> kwargs<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;batch_size&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#f92672">---&gt;</span> <span style="color:#ae81ff">41</span> <span style="color:#66d9ef">return</span> StateVectorSimulation(qubit_count, shots, batch_size)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>File <span style="color:#f92672">~/</span>anaconda3<span style="color:#f92672">/</span>envs<span style="color:#f92672">/</span>Braket<span style="color:#f92672">/</span>lib<span style="color:#f92672">/</span>python3<span style="color:#ae81ff">.10</span><span style="color:#f92672">/</span>site<span style="color:#f92672">-</span>packages<span style="color:#f92672">/</span>braket<span style="color:#f92672">/</span>default_simulator<span style="color:#f92672">/</span>state_vector_simulation<span style="color:#f92672">.</span>py:<span style="color:#ae81ff">60</span>, <span style="color:#f92672">in</span> StateVectorSimulation<span style="color:#f92672">.</span>__init__(self, qubit_count, shots, batch_size)
</span></span><span style="display:flex;"><span>     <span style="color:#ae81ff">57</span>     <span style="color:#66d9ef">raise</span> <span style="color:#a6e22e">ValueError</span>(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;batch_size must be a positive integer, but </span><span style="color:#e6db74">{</span>batch_size<span style="color:#e6db74">}</span><span style="color:#e6db74"> provided&#34;</span>)
</span></span><span style="display:flex;"><span>     <span style="color:#ae81ff">59</span> super()<span style="color:#f92672">.</span>__init__(qubit_count<span style="color:#f92672">=</span>qubit_count, shots<span style="color:#f92672">=</span>shots)
</span></span><span style="display:flex;"><span><span style="color:#f92672">---&gt;</span> <span style="color:#ae81ff">60</span> initial_state <span style="color:#f92672">=</span> np<span style="color:#f92672">.</span>zeros(<span style="color:#ae81ff">2</span><span style="color:#f92672">**</span>qubit_count, dtype<span style="color:#f92672">=</span>complex)
</span></span><span style="display:flex;"><span>     <span style="color:#ae81ff">61</span> initial_state[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>     <span style="color:#ae81ff">62</span> self<span style="color:#f92672">.</span>_state_vector <span style="color:#f92672">=</span> initial_state
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">MemoryError</span>: Unable to allocate <span style="color:#ae81ff">16.0</span> GiB <span style="color:#66d9ef">for</span> an array <span style="color:#66d9ef">with</span> shape (<span style="color:#ae81ff">1073741824</span>,) <span style="color:#f92672">and</span> data type complex128
</span></span></code></pre></div><p>This error occurs due to insufficient memory to execute the quantum circuit.
In general, simulating an n-qubit system using a statevector simulator requires the following amount of memory:</p>
<p>$$
X^{Memory} = 2^n \times 16 \ Bytes.
$$</p>
<p>Increasing the server&rsquo;s memory size might make execution possible, but as shown in the above equation, even doubling the server&rsquo;s memory only adds one quantum bit, which is not highly recommended.</p>
<p>Therefore, here are three suggestions to run without errors.</p>
<h2 id="run-on-amazon-braket-managed-simulators">Run on Amazon Braket Managed Simulators</h2>
<p>By using Amazon Braket managed simulators, you can run simulations with more qubits than on a local simulator. For example, the SV1 simulator supports simulations with up to 34 qubits, and the TN1 simulator supports up to 50 qubits.
<a href="https://aws.amazon.com/braket/pricing/?nc1=h_ls">However, be aware that charges apply based on execution time, so use them with caution.</a></p>
<h2 id="run-on-an-actual-quantum-computer">Run on an Actual Quantum Computer</h2>
<p>Using a quantum computer that can handle a larger number of qubits allows for the execution of larger-scale calculations. For example, the IONQ Forte 1 can handle 36 qubits. <a href="https://aws.amazon.com/braket/pricing/?nc1=h_ls">However, be aware that the usage fees for quantum computers are not free, so pay attention to the costs.</a></p>
<h2 id="reduce-the-number-of-qubits-in-the-quantum-circuit">Reduce the Number of Qubits in the Quantum Circuit</h2>
<p>If you can reduce the number of qubits in the original quantum circuit, it can also be executed successfully.
<br>
<br></p>
<hr>
<h4 id="amazon-braket-learning-course-1">Amazon Braket Learning Course</h4>
<p>I have created a learning course on Amazon Braket, AWS&rsquo;s quantum computing service.</p>
<div style="display: flex; align-items: center;">
  <a href="https://www.udemy.com/course/quantum-computing-on-aws-for-beginners-amazon-braket/?referralCode=F361C3FD774489A1B5B8" target="_blank" style="margin-right: 20px;">
    <img src="/mycourses/AWSCourse.webp" alt="QiskitCourseJa" width="170" style="vertical-align: middle;">
  </a>
  <div style="word-break: break-all; font-size: 90%;">
    <a href="https://www.udemy.com/course/quantum-computing-on-aws-for-beginners-amazon-braket/?referralCode=F361C3FD774489A1B5B8" target="_blank">
      Quantum Computing on AWS for Beginners: Amazon Braket
    </a>
  </div>
</div>
<p>This course is designed for those with no prior knowledge of quantum computing or AWS, and by the end, you&rsquo;ll even be able to learn about quantum machine learning.
Take advantage of this opportunity to build your skills in quantum technologies!</p>
<hr>

      </div>
    </article>
  </div>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://schrodinteq.github.io/" >
    &copy;  Schrodin's Diary on Quantum Computing and Quantum Programming 2025 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>

